(window.webpackJsonp=window.webpackJsonp||[]).push([["swag-pay-pal"],{"5eYc":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));var o=n("gHbT");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s,l,p,f=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),a(this,c(n).apply(this,arguments))}var r,s,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,e),r=n,(s=[{key:"init",value:function(){var e=this;if(this.paypal=null,!1!=(!0===o.a.getDataAttribute(this.el,"swag-paypal-installment-banner-is-confirm",!1))){var n=o.a.querySelector(document,"body");t(n).on("shown.bs.modal",(function(t){t.target.classList.contains("confirm-payment-modal")&&e.createInstallmentBanner()}))}else this.createInstallmentBanner()}},{key:"createInstallmentBanner",value:function(){var t=this;this.createScript((function(){t.paypal=window.paypal,t.paypal.Messages(t.getBannerConfig()).render(t.el)}))}},{key:"getBannerConfig",value:function(){return{amount:this.options.amount,currency:this.options.currency,style:{layout:this.options.layout,color:this.options.color,ratio:this.options.ratio,logo:{type:this.options.logoType},text:{color:this.options.textColor}}}}}])&&i(r.prototype,s),l&&i(r,l),n}(n("LkB+").a);p={clientId:"",amount:0,currency:"EUR",layout:"text",color:"blue",ratio:"8x1",logoType:"primary",textColor:"black"},(l="options")in(s=f)?Object.defineProperty(s,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):s[l]=p}).call(this,n("UoTJ"))},"LkB+":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var o=n("FGIj");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=!1,l=!1,p=[],f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,c(e).apply(this,arguments))}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(o=[{key:"createScript",value:function(t){if(p.push(t),s)l&&t.call(this);else{s=!0;var e=this.getScriptUrlOptions(),n="https://www.paypal.com/sdk/js?client-id=".concat(this.options.clientId).concat(e),o=document.createElement("script");o.type="text/javascript",o.src=n,o.addEventListener("load",this.callCallbacks.bind(this),!1),document.head.appendChild(o)}}},{key:"callCallbacks",value:function(){var t=this;p.forEach((function(e){e.call(t)})),l=!0}},{key:"getScriptUrlOptions",value:function(){var t="";return void 0!==this.options.commit&&(t+="&commit=".concat(this.options.commit)),this.options.languageIso&&(t+="&locale=".concat(this.options.languageIso)),this.options.currency&&(t+="&currency=".concat(this.options.currency)),this.options.intent&&"sale"!==this.options.intent&&(t+="&intent=".concat(this.options.intent)),void 0===this.options.useAlternativePaymentMethods||this.options.useAlternativePaymentMethods||(t+="&disable-funding=credit,card,sepa,bancontact,eps,giropay,ideal,mybank,sofort"),t+="&components=marks,buttons,messages"}}])&&i(n.prototype,o),r&&i(n,r),e}(o.a)},dkCy:function(t,e,n){"use strict";n.r(e);var o=n("p4AR"),r=n("gHbT"),i=n("u0Tz"),a=n("2Y4b"),c=n("LkB+");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,p(e).apply(this,arguments))}var n,c,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(c=[{key:"init",value:function(){this._client=new o.a,this.paypal=null,this.createButton()}},{key:"createButton",value:function(){var t=this;this.createScript((function(){t.paypal=window.paypal,t.renderButton()}))}},{key:"renderButton",value:function(){return this.paypal.Buttons(this.getButtonConfig()).render(this.el)}},{key:"getButtonConfig",value:function(){return{style:{size:this.options.buttonSize,shape:this.options.buttonShape,color:this.options.buttonColor,tagline:this.options.tagline,layout:"horizontal",label:"checkout",height:40},createOrder:this.createOrder.bind(this),onApprove:this.onApprove.bind(this)}}},{key:"createOrder",value:function(){var t=this;return this.options.addProductToCart?this.addProductToCart().then((function(){return t._createOrder()})):this._createOrder()}},{key:"_createOrder",value:function(){var t=this;return new Promise((function(e){t._client.get(t.options.createPaymentUrl,(function(t){var n=JSON.parse(t);e(n.token)}))}))}},{key:"addProductToCart",value:function(){var t=this,e=this._formatLineItems();return e._csrf_token=r.a.getDataAttribute(this.el,"swag-pay-pal-express-button-add-line-item-token"),new Promise((function(n){t._client.get(t.options.createNewCartUrl,(function(){t._client.post(t.options.addLineItemUrl,JSON.stringify(e),(function(){n()}))}))}))}},{key:"_formatLineItems",value:function(){var t=a.a.serializeJson(this.el.closest("form")),e={};return Object.keys(t).forEach((function(n){var o=n.match(/lineItems\[(.+)]\[(.+)]/);"redirectTo"!==n&&o&&3===o.length&&(e[o[1]]?e[o[1]][o[2]]=t[o[0]]:e[o[1]]=y({},o[2],t[o[0]]))})),{lineItems:e}}},{key:"onApprove",value:function(t,e){var n=this,o={paymentId:t.paymentID,_csrf_token:r.a.getDataAttribute(this.el,"swag-pay-pal-express-button-approve-payment-token")};i.a.create(document.body),this._client.post(this.options.approvePaymentUrl,JSON.stringify(o),(function(){e.redirect(n.options.checkoutConfirmUrl)}))}}])&&s(n.prototype,c),u&&s(n,u),e}(c.a);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}y(h,"options",{buttonColor:"gold",buttonShape:"rect",buttonSize:"small",languageIso:"en_GB",loginEnabled:!1,clientId:"",commit:!1,tagline:!1,addProductToCart:!1,createPaymentUrl:"",createNewCartUrl:"",addLineItemUrl:"",approvePaymentUrl:"",checkoutConfirmUrl:""});var w,O,P,S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,v(e).apply(this,arguments))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,t),n=e,(i=[{key:"init",value:function(){this.paypal=null,this.createButton()}},{key:"createButton",value:function(){var t=this;this.createScript((function(){t.paypal=window.paypal,t.renderButton()}))}},{key:"renderButton",value:function(){var t=r.a.querySelector(document,this.options.confirmOrderFormSelector);return r.a.querySelector(t,this.options.confirmOrderButtonSelector).classList.add("d-none"),this.paypal.Buttons(this.getButtonConfig()).render(this.el)}},{key:"getButtonConfig",value:function(){return{style:{size:this.options.buttonSize,shape:this.options.buttonShape,color:this.options.buttonColor,label:"checkout"},createOrder:this.createOrder.bind(this),onApprove:this.onApprove.bind(this),onError:this.onError.bind(this)}}},{key:"createOrder",value:function(){var t=this,e=new o.a,n={_csrf_token:r.a.getDataAttribute(this.el,"swag-pay-pal-smart-payment-buttons-create-payment-token")},i=this.options.orderId;return null!==i&&(n.orderId=i),new Promise((function(o){e.post(t.options.createPaymentUrl,JSON.stringify(n),(function(t){var e=JSON.parse(t);o(e.token)}))}))}},{key:"onApprove",value:function(t,e){var n=new URLSearchParams,o=this.options.checkoutConfirmUrl;n.append("paypalPayerId",t.payerID),n.append("paypalPaymentId",t.paymentID),null!==this.options.accountOrderEditUrl&&(o=this.options.accountOrderEditUrl);var r="".concat(o,"?").concat(n.toString());e.redirect(r)}},{key:"onError",value:function(){window.location.replace("".concat(this.options.checkoutConfirmUrl,"?").concat(this.options.errorParameter,"=1"))}}])&&d(n.prototype,i),a&&d(n,a),e}(c.a);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}P={buttonColor:"gold",buttonShape:"rect",buttonSize:"small",languageIso:"en_GB",clientId:"",commit:!1,useAlternativePaymentMethods:!0,createPaymentUrl:"",checkoutConfirmUrl:"",errorParameter:"",orderId:null,accountOrderEditUrl:"",checkedPaymentMethodSelector:"input.payment-method-input[checked=checked]",confirmOrderFormSelector:"#confirmOrderForm",confirmOrderButtonSelector:'button[type="submit"]'},(O="options")in(w=S)?Object.defineProperty(w,O,{value:P,enumerable:!0,configurable:!0,writable:!0}):w[O]=P;var E=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,C(e).apply(this,arguments))}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,t),n=e,(o=[{key:"init",value:function(){this.paypal=null,this.createMarks()}},{key:"createMarks",value:function(){var t=this;this.createScript((function(){t.paypal=window.paypal,t.paypal.Marks().render(t.el)}))}}])&&_(n.prototype,o),r&&_(n,r),e}(c.a);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(E,"options",{clientId:"",useAlternativePaymentMethods:!0});var x=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,L(e).apply(this,arguments))}var n,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,t),n=e,(a=[{key:"init",value:function(){r.a.querySelector(document,"#confirmOrderForm").addEventListener("submit",this.onConfirmCheckout.bind(this)),this.createPaymentWall()}},{key:"createPaymentWall",value:function(){this.paypal=window.PAYPAL,this.paypal.apps.PPP({placeholder:this.options.placeholder,approvalUrl:this.options.approvalUrl,mode:this.options.mode,country:this.options.customerCountryIso,buttonLocation:this.options.buttonLocation,language:this.options.customerSelectedLanguage,useraction:this.options.userAction,surcharging:this.options.surcharging,showLoadingIndicator:this.options.showLoadingIndicator,showPuiOnSandbox:this.options.showPuiOnSandbox})}},{key:"onConfirmCheckout",value:function(t){if(t.preventDefault(),t.target.checkValidity()){this._client=new o.a;var e={_csrf_token:r.a.getDataAttribute(this.el,"swag-pay-pal-plus-payment-wall-checkout-order-token")};i.a.create(document.body);var n=this.options.orderId;if(null!==n)return e.orderId=n,e.paymentMethodId=this.options.paymentMethodId,void this._client.post(this.options.setPaymentRouteUrl,JSON.stringify(e),this.afterSetPayment.bind(this));this._client.post(this.options.checkoutOrderUrl,JSON.stringify(e),this.afterCreateOrder.bind(this))}}},{key:"afterCreateOrder",value:function(t){var e=JSON.parse(t).data.id,n={paypalPaymentId:this.options.paypalPaymentId,paypalToken:this.options.paypalToken};n[this.options.isEnabledParameterName]=!0,this._client.post("".concat(this.options.checkoutOrderUrl,"/").concat(e,"/pay"),JSON.stringify(n),this.afterPayOrder.bind(this))}},{key:"afterSetPayment",value:function(t){!0===JSON.parse(t).success&&this.afterCreateOrder(JSON.stringify({data:{id:this.options.orderId}}))}},{key:"afterPayOrder",value:function(t){"plusPatched"===JSON.parse(t).paymentUrl&&this.paypal.apps.PPP.doCheckout()}}])&&B(n.prototype,a),c&&B(n,c),e}(n("FGIj").a);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(x,"options",{placeholder:"ppplus",approvalUrl:"",paypalPaymentId:"",paypalToken:"",customerCountryIso:"",mode:"live",buttonLocation:"outside",preSelection:"paypal",userAction:"commit",customerSelectedLanguage:"en_GB",surcharging:!1,showLoadingIndicator:!0,showPuiOnSandbox:!0,checkoutOrderUrl:"",setPaymentRouteUrl:"",isEnabledParameterName:"isPayPalPlusCheckout",orderId:null});var J=n("5eYc"),N=window.PluginManager;N.register("SwagPayPalExpressButton",h,"[data-swag-paypal-express-button]"),N.register("SwagPayPalSmartPaymentButtons",S,"[data-swag-paypal-smart-payment-buttons]"),N.register("SwagPayPalMarks",E,"[data-swag-paypal-marks]"),N.register("SwagPayPalPlusPaymentWall",x,"[data-swag-paypal-payment-wall]"),N.register("SwagPayPalInstallmentBanner",J.a,"[data-swag-paypal-installment-banner]")}},[["dkCy","runtime","vendor-node","vendor-shared"]]]);